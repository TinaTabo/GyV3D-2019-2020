<!DOCTYPE html>
<html>
  <head>
    <title>Ejercicio 5</title>
    <!--Libreria de JavaScript que nos permite utilizar glMatrix--->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gl-matrix/2.8.1/gl-matrix-min.js"></script>
    <script id="shaderVs" type="x-shader/x-vertex">
        attribute vec4 a_Position;
        attribute vec3 a_Color;
        uniform mat4 u_pMatrix; // Matriz de proyeccion
        uniform mat4 u_mvMatrix; // Matriz de transformación
        varying highp vec4 v_Color;
        void main() {
            gl_Position = u_pMatrix * u_mvMatrix * a_Position;
            v_Color = vec4(a_Color, 1.0);
        }
    </script>

    <script id="shaderFs" type="x-shader/x-fragment">
        varying highp vec4 v_Color;
        void main() {
            gl_FragColor = v_Color;
        }
    </script>

    <script>
      var gl;
      var count = 0.0;

      function init() {
        // Obtenemos el canvas que hemos creado.
        var canvas = document.getElementById("myCanvas");
        // Creamos el contexto 3D
        gl = canvas.getContext("webgl");
        if (!gl) {
            console.log("Failed to get the rendering context for WebGL");
            return;
        }
        // Leemos los shaders
        var vs = document.getElementById('shaderVs').innerHTML;
        var fs = document.getElementById('shaderFs').innerHTML;
        initShaders(gl, vs, fs);
        // Escribimos la posicion de los verticen en el vertexShader
        initVertexBuffers(gl);

        // Implementamos la matriz de proyeccion **NUEVO**
        initProjection(gl, canvas);

        // Asignamos el color al canvas
        gl.clearColor(0.0, 0.0, 0.0, 1.0);

        // Forzamos la eliminación de las superficies ocultas para que el cubo sea sólido.
        gl.enable(gl.DEPTH_TEST);

        // Pintamos el canvas.
        drawScene();
      }

      
    </script>

  </head>

  <!--En el cuerpo se crea el canvas y se carga la funcion init--->
  <body onload="init()">
      <!--Creamos el canvas.--->
      <canvas id="myCanvas" width="640" height="480"></canvas>
  </body>
</html>
